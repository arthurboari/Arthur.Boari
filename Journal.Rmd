---
title: "Blog"
output:
  html_document:
    toc: true
    toc_float: true
    collapsed: false
    number_sections: false
    toc_depth: 1
    #code_folding: hide
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(message=FALSE,warning=FALSE, cache=TRUE)
```

# Caminho absoluto versus caminho relativo

2021 | 12 | 14 Last compiled: `r Sys.Date()`

Programar em R pode ser simples ou complicado de acordo com a preferência do cliente ;)

Brincadeiras a parte, trabalhar com análises no R vai despender de memória e vários arquivos (principalmente para importar os dados). Se você usa frequentemente as funções *getwd* e *setwd* para acessar pastas no seu computador, **PARE!**

O uso dessas funções irá, não só te deixar mal acostumado (pra não te ofender, te chamando de preguiçoso *emoji do riso*), mas <u>também</u> desorganizado. Para compreender o motivo, devemos entender dois conceitos básicos:

* **Caminho absoluto** é o caminho que qualquer arquivo tenha no diretório de seu computador, por exemplo: 
```{r echo=FALSE}
a<-"C:\\Users\\aboar\\Documents\\Pasta do R\\portAB\\_posts\\Caminho absoluto versus caminho relativo\\Caminho absoluto versus caminho relativo.Rmd"
print(a)
```

é o caminho do arquivo que gerou essa página. E é <u>característico</u> a presença do *C:*, *D:* ou *E:* a depender da sua máquina.

* **Caminho relativo** é o caminho que o arquivo tem dentro do projeto, o mesmo arquivo
citado através do caminho acima pode ser acessado assim: 

```{r echo=FALSE}
b<-"_posts/Caminho absoluto versus caminho relativo/Caminho absoluto versus caminho relativo.Rmd"
print(b)
```

Perceba o seguinte: caso eu te entregue um script com a seguinte função:

```{r eval=FALSE, message=TRUE, warning=TRUE, include=TRUE}
dados<-read.csv("C:\Users\aboar\Documents\Pasta do R\portAB\_posts\Caminho absoluto versus caminho relativo\dados_tcc.csv")
```
O R irá encontrá-lo? Certamente **NÃO**! Por quê? Porque o uso desse caminho dentro da função *read.csv* é específico do <u>meu</u> computador. E agora?

O uso de projetos, e o seu compartilhamento através do GitHub ou através de outros serviços de armazenamentos em nuvem, permitem o acesso aos arquivos devido ao uso de caminhos relativos. Portanto, se eu compartilhasse com você o meu projeto, você conseguiria acessar o arquivo através do código:

```{r eval=FALSE, message=TRUE, warning=TRUE, include=TRUE}
dados<-read.csv("images/dados_tcc.csv.txt")
```

Em suma, trabalhe com projetos no R. Ali, todos os arquivos que você irá importar e todos os arquivos que você irá gerar, como *plots* e arquivos de dados já processados, poderão ser acessados facilmente depois através de caminhos relativos, além de permitir que outras pessoas vinculadas ao projeto possam executar o código em seus computadores próprios sem qualquer problema. Dica: aperte a tecla *tab* entre as aspas duplas do argumento *file* e selecione o arquivo pelo menu drop-down que irá abrir (benefícios do RStudio).


# Personalize o RStudio com um tema SEU!

2021 | 12 | 14 Last compiled: `r Sys.Date()`

Você, que utiliza a interface *RStudio* no dia-a-dia, já deve ter configurado a aparência do IDE (Ambiente de Desenvolvimento Integrado) para um tema que te agrade visualmente e não cause tanta fadiga ocular, certo? Eu já testei vários temas pré-definidos, e sempre havia algo que não me agradava, como cores "fracas" na parte de comentários, dentre outros pontos que não ficavam bem.

Nesse meu primeiro tutorial espero te guiar na construção de um tema **seu**! Vamos lá?

1. Primeiramente, abra este [link](https://tmtheme-editor.herokuapp.com/#!/editor/theme/Monokai). Aqui você encontrará o seguinte interface:

![Figura 1: Interface do endereço eletrônico](images\Temas RStudio\Site de temas.JPG)

* Na aba *Scopes* você pode alterar a cor da fonte (FG), a cor do fundo de cada uma das seções (BG) e se receberá itálico (*I*), negrito (**B**) ou sublinhado (<u>U</u>).

* Na aba *General* você irá definir o *background* do RStudio, e em *Info*
 você insere um nome e informações relacionadas ao seu tema.
 
* Quer inspiração? Abra o menu *drop-down* *Gallery* e você encontrará vários temas já pré-definidos e que não estão disponíveis no RStudio.

2. Após adaptar e criar o seu próprio tema, é hora de salvar o seu tema. Clique no menu **Download** e salve o arquivo .tmTheme em uma pasta destinada aos seus projetos do R.

Para este material, realizei o download do tema *Iceberg* disponível no menu *drop-down* *Gallery*.

3. Abra o seu RStudio e digite o seguinte código:

```{r eval=FALSE, message=TRUE, warning=TRUE, include=TRUE}
rstudioapi::convertTheme("images\Temas RStudio\Iceberg.tmTheme")
```
Note: você deve ter o pacote **rstudioapi** instalado, caso contrário instale através do código:

```{r eval=FALSE, message=TRUE, warning=TRUE, include=TRUE}
install.packages("rstudioapi")
```

4. Agora cheque a aba *Appearance* do *Global Options*, localize o tema e clique em *Apply* para que seja aplicado a sua interface.

![Figura 2: Aba Appearance](images\Temas RStudio\Aba Appearance.JPG){width=50%}


Não deu certo? Pode entrar em contato através dos canais disponibilizados na aba **Sobre o autor** ou pesquise o erro no forum *stackoverflow*.

# Importando dados no R

2021 | 12 | 15 Last compiled: `r Sys.Date()`

Conforme você for aprofundando na trabalho com o R, vai acabar tendo de utilizar de bases de dados externas ao R, ou seja, com dados obtidos em portais e eles virão em vários formatos. Vamos aprender algumas funções e pacotes para que você importe o seu arquivo com êxito e não te traga dor de cabeça no futuro!

## Arquivo .csv

Esse tipo de arquivo vem da expressão "comma separated values", em um bom português: "valores separados por vírgula". Aqui a vírgula faz o papel do separador de colunas (veremos que o ponto-e-vírgula também pode fazer esse papel nos arquivos .csv).

O primeiro passo a lidar com esse tipo de arquivo é fazer sua **visualização** no Bloco de Notas. Você <u>NÃO</u> deve alterar o arquivo, apenas visualize e extraia informações que te ajudarão a importá-lo.

Como exemplo, irei utilizar um arquivo contendo dados de qualidade do ar para a estação Delegacia Amazonas (Belo Horizonte) de 2019.

A Figura abaixo exibe o arquivo aberto no Bloco de Notas.

![Figura 3: Arquivo aberto no Bloco de Notas](Arquivos\Importação\csv foto.JPG)

Aqui podemos denotrar que o arquivo possui cabeçalho, o ponto-e-vírgula separa as colunas  e a vírgula separa os decimais. São esses pontos que devem ser observados aqui.

Vamos para a primeira função. Essa é a *read.table* e é a *função-mãe* de outras como *read.csv* e *read.csv2*.

```{r}
# dê um help na função e leia
?read.table

#aqui está o script de importação e será explicado abaixo

dado<-read.table(file = "Arquivos/Importação/planilha2019.csv", header = TRUE,sep = ";",dec = ",")
```

O argumento **file** recebe, como *string*, o caminho no qual está o arquivo. Ao trabalhar como projetos você pode simplesmente inserir as aspas duplas e teclar TAB para procurar de forma mais ágil o caminho do arquivo. **header** é um argumento lógico, que ao receber TRUE assume a <u>primeira linha</u> do arquivo como o cabeçalho, se receber FALSE a primeira linha será tratada como um dado normal. Os argumentos **sep** e **dec** recebem, como *string* os caracteres de separação de colunas e decimais, respectivamente.

Vamos observar o objeto **dado**:

```{r}
head(x = dado, n = 6)
```
Nota que *n* é o número de linhas do objeto que selecionei para visualizar.

Você pode utilizar a função **read.csv2** para importar o mesmo arquivo. Mas qual a diferença? Nenhuma! O que temos aqui é apenas a "definição de argumentos defaults". Veja:

```{r}
dado<-read.csv2(file = "Arquivos/Importação/planilha2019.csv")
head(x = dado, n = 6)
```
Basicamente, o mesmo resultado. Portanto, há várias formas de importar o mesmo arquivo. Definir os argumentos ajuda a garantir uma importação mais detalhada. Você pode usar a função *read.table* para importar outros tipos de arquivos, como .txt.

## Planilhas do Excel

Aqui vamos precisar de pacote específico. Existem vários, entretanto iremos aprender a importar através de uma função do seguinte pacote:

```{r eval=FALSE, message=TRUE, warning=TRUE, include=TRUE}
install.packages("readxl")
```

Aqui vamos trabalhar com um arquivo de dados meteorológicos de Lavras-MG.

```{r}
#Carregando o pacote
library(readxl)

#help na função
?read_excel

#importando
dado<-read_excel(path = "Arquivos/Importação/LAVRAS (83687) (2) (1).xlsx")
```
Aqui bastou apenas definir o argumento *path* que é igual ao argumento *file* da função *read.table*.

Vamos visualizar parte do arquivo:

```{r}
head(x = dado, n = 6)
```

Caso seu arquivo .csv ou .xlsx contenha linhas de texto antes do dado em sim, basta "pular" a quantidade de linhas através do argumento *skip* de suas respectivas funções.

Veja um aplicação do argumento *skip* abaixo:

```{r eval=FALSE, message=TRUE, warning=TRUE, include=TRUE}
dado<-read.csv2(file = "Arquivos/Importação/SOROCABA (83851).csv")

head(x = dado, n = 6)
```
> Error in read.table(file = file, header = header, sep = sep, quote = quote, : 
more columns than column names


Observe que ocorreu um erro. Basicamente ele "reclama" que há mais colunas do que nomes para ela. Vamos observar o arquivo no Bloco de Notas:

![Figura 4: Arquivo aberto no Bloco de Notas](Arquivos\Importação\csv foto 2.JPG)

Podemos ver que há uma linha antes do dados, vamos retirá-la com o argumento *skip*.

```{r}
dado<-read.csv2(file = "Arquivos/Importação/SOROCABA (83851).csv",skip = 1)

head(x = dado, n = 6)
```

Observe que agora deu certo!

Na próxima postagem veremos como exportar dados para .csv e .xlsx.